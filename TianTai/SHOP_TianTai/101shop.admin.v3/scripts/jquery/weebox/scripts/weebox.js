(function(c){var a={};var e=new Array();var b=function(j,g){var f=this;this.dh=null;this.mh=null;this.dc=null;this.dt=null;this.db=null;this.selector=null;this.ajaxurl=null;this.options=null;this._dragging=false;this._content=j||"";this._options=g||{};this._defaults={boxid:null,boxclass:null,cache:false,type:"dialog",title:"",width:0,height:0,timeout:0,draggable:true,modal:true,focus:null,blur:null,position:"center",overlay:30,showTitle:true,showButton:true,showCancel:true,showOk:true,showCloseButton:true,okBtnName:"确定",cancelBtnName:"取消",contentType:"text",contentChange:false,clickClose:false,zIndex:999,animate:"",showAnimate:"",hideAnimate:"",onclose:null,onopen:null,oncancel:null,onok:null,suggest:{url:"",tele:"",vele:"",fn:null},select:{url:"",type:"radio",tele:"",vele:"",width:120,search:false,fn:null}};this.initOptions=function(){f._options=f._options||{};f._options.animate=f._options.animate||"";f._options.showAnimate=f._options.showAnimate||f._options.animate;f._options.hideAnimate=f._options.hideAnimate||f._options.animate;f._options.type=f._options.type||"dialog";f._options.title=f._options.title||"";f._options.boxclass=f._options.boxclass||"wee"+f._options.type;f._options.contentType=f._options.contentType||"";if(f._options.contentType==""){f._options.contentType=(f._content.substr(0,1)=="#")?"selector":"text"}f.options=c.extend({},f._defaults,f._options);f._options=null;f._defaults=null};this.initBox=function(){var k="";switch(f.options.type){case"alert":case"select":case"dialog":k='<div class="weedialog"><div class="dialog-header"><div class="dialog-tl"></div><div class="dialog-tc"><div class="dialog-tc1"></div><div class="dialog-tc2">'+(f.options.showCloseButton?'<a href="javascript:;" onclick="return false" title="关闭" class="dialog-close"></a>':'')+'<span class="dialog-title"></span></div></div><div class="dialog-tr"></div></div><table width="100%" border="0" cellspacing="0" cellpadding="0" ><tr><td class="dialog-cl"></td><td><div class="dialog-content"></div><div class="dialog-button"><input type="button" class="dialog-ok" value="确定"><input type="button" class="dialog-cancel" value="取消"></div></td><td class="dialog-cr"></td></tr></table><div class="dialog-bot"><div class="dialog-bl"></div><div class="dialog-bc"></div><div class="dialog-br"></div></div></div>';break;case"custom":case"suggest":k='<div><div class="dialog-content"></div></div>';break}f.dh=c(k).appendTo("body").hide().css({position:"absolute",overflow:"hidden",zIndex:f.options.zIndex});f.dc=f.find(".dialog-content");f.dt=f.find(".dialog-title");f.db=f.find(".dialog-button");if(f.options.boxid){f.dh.attr("id",f.options.boxid)}if(f.options.boxclass){f.dh.addClass(f.options.boxclass)}if(f.options.height>0){f.dc.css("height",f.options.height)}if(f.options.width>0){f.dh.css("width",f.options.width)}f.dh.bgiframe()};this.initMask=function(){if(f.options.modal){if(c.browser.msie){h=document.compatMode=="CSS1Compat"?document.documentElement.clientHeight:document.body.clientHeight;w=document.compatMode=="CSS1Compat"?document.documentElement.clientWidth:document.body.clientWidth}else{h=f.bheight();w=f.bwidth()}f.mh=c("<div class='dialog-mask'></div>").appendTo("body").hide().css({width:w,height:h,zIndex:f.options.zIndex-1}).bgiframe()}};this.initContent=function(p){f.dh.find(".dialog-ok").val(f.options.okBtnName);f.dh.find(".dialog-cancel").val(f.options.cancelBtnName);if(f.options.title==""){}else{f.dt.html(f.options.title)}if(!f.options.showTitle){f.dt.hide()}if(!f.options.showButton){f.dh.find(".dialog-button").hide()}if(!f.options.showCancel){f.dh.find(".dialog-cancel").hide()}if(!f.options.showOk){f.dh.find(".dialog-ok").hide()}if(f.options.type=="suggest"){f.hide();c(f.options.suggest.tele).unbind("keyup").keyup(function(){var s=c.trim(this.value);var r=null;for(key in a){if(key==s){r=a[key]}}if(r===null){c.ajax({type:"GET",data:{q:s},url:f.options.suggest.url||f._content,success:function(t){r=t},dataType:"json",async:false})}a[s]=r;var q="";for(key in r){q+="<li>"+r[key].name+"</li>"}f.setContent(q);f.show();f.find("li").click(function(){var t=f.find("li").index(this);c(f.options.suggest.tele).val(r[t].name);c(f.options.suggest.vele).val(r[t].id);if(typeof f.options.suggest.fn=="function"){fn(r[t])}f.hide()})})}else{if(f.options.type=="select"){var o=f.options.select.type||"radio";var k=f.options.select.url||f._content||"";var m=f.options.select.search||false;c.ajax({type:"GET",url:k,success:function(t){var r="";if(t===null){r="没有数据"}else{if(m){r+='<div class="wsearch"><input type="text"><input type="button" value="查询"></div>'}var q=c.trim(c(f.options.select.vele).val()).split(",");r+='<div class="wselect">';for(key in t){var s=(c.inArray(t[key].id,q)==-1)?"":'checked="checked"';r+='<li><label><input name="wchoose" '+s+' type="'+o+'" value="'+t[key].id+'">'+t[key].name+"</label></li>"}r+="</div>"}f.setContent(r);f.find("li").width(f.options.select.width);f.find(".wsearch input").keyup(function(){var u=c.trim(this.value);f.find("li").hide();for(i in t){if(t[i].id==u||t[i].name.indexOf(u)!=-1){f.find("li:eq("+i+")").show()}}});f.setOnok(function(){if(o=="radio"){if(f.find(":checked").length==0){c(f.options.select.tele).val("");c(f.options.select.vele).val("")}else{var u=f.find(":radio[name=wchoose]").index(f.find(":checked")[0]);c(f.options.select.tele).val(t[u].name);c(f.options.select.vele).val(t[u].id);if(typeof f.options.select.fn=="function"){fn(t[u])}}}else{if(f.find(":checked").length==0){c(f.options.select.tele).val("");c(f.options.select.vele).val("")}else{var y=[],v=[],x=[];f.find(":checked").each(function(){var z=f.find(":checkbox[name=wchoose]").index(this);y.push(t[z]);v.push(t[z].id);x.push(t[z].name)});c(f.options.select.tele).val(x.join(","));c(f.options.select.vele).val(v.join(","));if(typeof f.options.select.fn=="function"){fn(y)}}}f.close()});f.show()},dataType:"json"})}else{if(f.options.contentType=="selector"){f.selector=f._content;f._content=c(f.selector).html();f.setContent(f._content);var n=c(f.selector).find(":checkbox");f.dc.find(":checkbox").each(function(q){this.checked=n[q].checked});c(f.selector).empty();f.show();f.focus();f.onopen()}else{if(f.options.contentType=="ajax"){f.ajaxurl=f._content;f.setLoading();f.show();f.dh.find(".dialog-button").hide();if(f.options.cache==false){if(f.ajaxurl.indexOf("?")==-1){f.ajaxurl+="?_t="+Math.random()}else{f.ajaxurl+="&_t="+Math.random()}}c.get(f.ajaxurl,function(q){f._content=q;f.setContent(f._content);f.show();f.focus();f.onopen()})}else{if(f.options.contentType=="iframe"){var l='<style type="text/css">';l+=("\n.dialog-box .dialog-content{padding:0px;}");l+=("\n</style>");l+=('<iframe class="dialogIframe" src="'+f._content+'" width="100%" height="100%" frameborder="0"></iframe>');f.setContent(l);f.onopen();f.show()}else{f.setContent(f._content);f.show();f.focus();f.onopen()}}}}}};this.initEvent=function(){f.dh.find(".dialog-close, .dialog-cancel, .dialog-ok").unbind("click").click(function(){f.close()});if(typeof(f.options.onok)=="function"){f.dh.find(".dialog-ok").unbind("click").click(function(){f.options.onok(f)})}if(typeof(f.options.oncancel)=="function"){f.dh.find(".dialog-cancel").unbind("click").click(function(){f.options.oncancel(f)})}if(f.options.timeout>0){window.setTimeout((function(){if(typeof(f.options.ontimeout)!='undefined')f.options.ontimeout(f);else f.close();}),(f.options.timeout*1000))}this.drag()};this.setOnok=function(k){f.dh.find(".dialog-ok").unbind("click");if(typeof(k)=="function"){f.dh.find(".dialog-ok").click(function(){k(f)})}};this.setOncancel=function(k){f.dh.find(".dialog-cancel").unbind("click");if(typeof(k)=="function"){f.dh.find(".dialog-cancel").click(function(){k(f)})}};this.setOnclose=function(k){f.options.onclose=k};this.drag=function(){if(f.options.draggable&&f.options.showTitle){f.dh.find(".dialog-header").mousedown(function(k){var r=this;var n=document;var p=f.dh.position().left;var m=f.dh.position().top;var t=k.clientX;var s=k.clientY;var l=f.dh.width();var u=f.dh.height();var q=f.bwidth();var v=f.bheight();if(r.setCapture){r.setCapture()}c(document).mousemove(function(o){if(window.getSelection){window.getSelection().removeAllRanges()}else{document.selection.empty()}var y=Math.max(p+o.clientX-t,0);var x=Math.max(m+o.clientY-s,0);var y=Math.min(y,q-l);var x=Math.min(x,v-u);f.dh.css({left:y,top:x})}).mouseup(function(){if(r.releaseCapture){r.releaseCapture()}c(document).unbind("mousemove");c(document).unbind("mouseup")})})}};this.onopen=function(){if(typeof(f.options.onopen)=="function"){f.options.onopen(f)}};this.addButton=function(l){l=l||{};l.title=l.title||"OK";l.bclass=l.bclass||"dialog-btn1";l.fn=l.fn||null;l.index=l.index||0;var k=c('<input type="button" class="'+l.bclass+'" value="'+l.title+'">').click(function(){if(typeof l.fn=="function"){l.fn(f)}});if(l.index<f.db.find("input").length){f.db.find("input:eq("+l.index+")").before(k)}else{f.db.append(l)}};this.show=function(){if(f.options.showButton){f.dh.find(".dialog-button").show()}if(f.options.position=="center"){f.setCenterPosition()}else{f.setElementPosition()}if(typeof f.options.showAnimate=="string"){f.dh.show(f.options.animate)}else{f.dh.animate(f.options.showAnimate.animate,f.options.showAnimate.speed)}if(f.mh){f.mh.show()}};this.hide=function(k){if(typeof f.options.hideAnimate=="string"){f.dh.hide(f.options.animate,k)}else{f.dh.animate(f.options.hideAnimate.animate,f.options.hideAnimate.speed,"",k)}};this.focus=function(){if(f.options.focus){f.dh.find(f.options.focus).focus();f.dh.find(f.options.focus).focus()}else{f.dh.find(".dialog-cancel").focus()}};this.find=function(k){return f.dh.find(k)};this.setLoading=function(){f.setContent('<div class="dialog-loading"></div>');f.dh.find(".dialog-button").hide();if(f.dc.height()<90){f.dc.height(Math.max(90,f.options.height))}if(f.dh.width()<200){f.dh.width(Math.max(200,f.options.width))}};this.setWidth=function(k){f.dh.width(k)};this.setTitle=function(k){f.dt.html(k)};this.getTitle=function(){return f.dt.html()};this.setContent=function(k){f.dc.html(k);if(f.options.height>0){f.dc.css("height",f.options.height)}else{f.dc.css("height","")}if(f.options.width>0){f.dh.css("width",f.options.width)}else{f.dh.css("width","")}if(f.options.showButton){f.dh.find(".dialog-button").show()}};this.getContent=function(){return f.dc.html()};this.disabledButton=function(l,k){f.dh.find(".dialog-"+l).attr("disabled",k)};this.hideButton=function(k){f.dh.find(".dialog-"+k).hide()};this.showButton=function(k){f.dh.find(".dialog-"+k).show()};this.setButtonTitle=function(l,k){f.dh.find(".dialog-"+l).val(k)};this.next=function(k){k=k||{};k.title=k.title||f.getTitle();k.content=k.content||"";k.okname=k.okname||"确定";k.width=k.width||260;k.onok=k.onok||f.close;k.onclose=k.onclose||null;k.oncancel=k.oncancel||null;k.hideCancel=k.hideCancel||true;f.setTitle(k.title);f.setButtonTitle("ok",okname);f.setWidth(width);f.setOnok(k.onok);if(k.content!=""){f.setContent(k.content)}if(k.hideCancel){f.hideButton("cancel")}if(typeof(k.onclose)=="function"){f.setOnclose(k.onclose)}if(typeof(k.oncancel)=="function"){f.setOncancel(k.oncancel)}f.show()};this.close=function(m){if(typeof(f.options.onclose)=="function"){f.options.onclose(f)}if(f.options.contentType=="selector"){if(f.options.contentChange){var l=f.find(":checkbox");c(f.selector).html(f.getContent());if(l.length>0){c(f.selector).find(":checkbox").each(function(n){this.checked=l[n].checked})}}else{c(f.selector).html(f._content)}}else{if(f.options.contentType=="iframe"){var k=f.dh.find(".dialogIframe");k.removeAttr("src")}}if(f.options.blur){c(f.options.blur).focus()}for(i=0;i<e.length;i++){if(e[i].dh.get(0)==f.dh.get(0)){e.splice(i,1);break}}f.hide();f.dh.remove();if(f.mh){f.mh.remove()}};this.bheight=function(){if(c.browser.msie&&c.browser.version<7){var l=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);var k=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(l<k){return c(window).height()}else{return l}}else{return c(document).height()}};this.bwidth=function(){if(c.browser.msie&&c.browser.version<7){var k=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);var l=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(k<l){return c(window).width()}else{return k}}else{return c(document).width()}};this.setCenterPosition=function(){var l=c(window),m=c(document),n=m.scrollTop(),k=m.scrollLeft();n+=(l.height()-f.dh.height())/2;k+=(l.width()-f.dh.width())/2;f.dh.css({top:n,left:k})};this.setElementPosition=function(){var n=c(f.options.position.refele);var q=f.options.position.reftop||0;var m=f.options.position.refleft||0;var t=(typeof f.options.position.adjust=="undefined")?true:f.options.position.adjust;var s=n.offset().top+n.height();var o=n.offset().left;var r=document.documentElement.clientWidth||document.body.clientWidth;var v=document.documentElement.clientHeight||document.body.clientHeight;var u=document.documentElement.scrollTop||document.body.scrollTop;var l=document.documentElement.scrollLeft||document.body.scrollLeft;var k=u+v;var p=l+r;if(t&&o+f.dh.width()>p){o=p-f.dh.width()-1}if(t&&s+f.dh.height()>k){s=k-f.dh.height()-1}o=Math.max(o+m,0);s=Math.max(s+q,0);f.dh.css({top:s,left:o})};this.initOptions();this.initMask();this.initBox();this.initContent();this.initEvent()};var d=function(){var f=this;this._onbox=false;this._opening=false;this.zIndex=999;this.length=function(){return e.length};this.open=function(l,g){f._opening=true;if(typeof(g)=="undefined"){g={}}if(g.boxid){for(var j=0;j<e.length;j++){if(e[j].dh.attr("id")==g.boxid){e[j].close();break}}}g.zIndex=f.zIndex;f.zIndex+=10;var k=new b(l,g);k.dh.click(function(){f._onbox=true});e.push(k);if(k.options.position!="center"){k.setElementPosition()}if(k.mh){k.mh.css({width:k.bwidth(),height:k.bheight()})}return k};this.close=function(){var g=this.getTopBox();if(false!=g){g.close()}};this.getTopBox=function(){if(e.length>0){return e[e.length-1]}else{return false}};c(window).scroll(function(){if(e.length>0){for(i=0;i<e.length;i++){var g=e[i];if(g.options.position!="center"){g.setElementPosition()}if(g.mh){g.mh.css({width:g.bwidth(),height:g.bheight()})}}}}).resize(function(){if(e.length>0){var g=f.getTopBox();if(g.options.position=="center"){g.setCenterPosition()}if(g.mh){g.mh.css({width:g.bwidth(),height:g.bheight()})}}});c(document).click(function(j){if(j.button==2){return true}if(e.length>0){var g=f.getTopBox();if(!f._opening&&!f._onbox&&g.options.clickClose){g.close()}}f._opening=false;f._onbox=false})};c.extend({weeboxs:new d()})})(jQuery);(function($){$.fn.bgIframe=$.fn.bgiframe=function(s){if($.browser.msie&&/6.0/.test(navigator.userAgent)){s=$.extend({top:'auto',left:'auto',width:'auto',height:'auto',opacity:true,src:'javascript:false;'},s||{});var prop=function(n){return n&&n.constructor==Number?n+'px':n;},html='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+s.src+'"'+'style="display:block;position:absolute;z-index:-1;'+(s.opacity!==false?'filter:Alpha(Opacity=\'0\');':'')+'top:'+(s.top=='auto'?'expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+\'px\')':prop(s.top))+';'+'left:'+(s.left=='auto'?'expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+\'px\')':prop(s.left))+';'+'width:'+(s.width=='auto'?'expression(this.parentNode.offsetWidth+\'px\')':prop(s.width))+';'+'height:'+(s.height=='auto'?'expression(this.parentNode.offsetHeight+\'px\')':prop(s.height))+';'+'"/>';return this.each(function(){try{if($('> iframe.bgiframe',this).length==0){this.insertBefore(document.createElement(html),this.firstChild)}}catch(e){}});}return this;};})(jQuery);